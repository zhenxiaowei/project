!function(e){var t,a,s={cntClass:"rd-mobilemenu",menuClass:"rd-mobilemenu_ul",submenuClass:"rd-mobilemenu_submenu",panelClass:"rd-mobilepanel",toggleClass:"rd-mobilepanel_toggle",titleClass:"rd-mobilepanel_title"},o=function(t,a){this.options=a,this.$source=e(t)};o.prototype={init:function(){var e=this;e.createDOM(),e.createListeners()},createDOM:function(){var t=this;e("body").append(e("<div/>",{"class":s.cntClass}).append(t.createNavDOM())).append(e("<div/>",{"class":s.panelClass}).append(e("<button/>",{"class":s.toggleClass}).append(e("<span/>"))).append(e("<h2/>",{"class":s.titleClass,text:document.title})))},createNavDOM:function(){for(var t=this,a=e("<ul>",{"class":s.menuClass}),o=t.$source.children(),l=0;l<o.length;l++){for(var n=o[l].children,i=null,r=0;r<n.length;r++)if(n[r].tagName)switch(i||(i=document.createElement("li"),o[l].className.indexOf("active")>-1&&(i.className="active")),n[r].tagName.toLowerCase()){case"a":var c=n[r].cloneNode(!0);i.appendChild(c);break;case"ul":var u=n[r].cloneNode(!0);u.className=s.submenuClass,e(u).css({display:"none"}),i.appendChild(u),e(i).find("> a").each(function(){$this=e(this),$this.addClass("rd-with-ul").append(e("<span/>",{"class":"rd-submenu-toggle"})).find(".rd-submenu-toggle").on("click",function(t){if(t.preventDefault(),$this=e(this).parent(),$this.hasClass("rd-with-ul")&&!$this.hasClass("active")){e(".rd-with-ul").removeClass("active");var a=$this.addClass("active").parent().find("."+s.submenuClass);a.stop().slideDown(),e("."+s.submenuClass).not(a).stop().slideUp()}else{var a=$this.removeClass("active").parent().find("."+s.submenuClass);a.stop().slideUp()}})})}i&&a.append(i)}return a},createListeners:function(){var e=this;e.createToggleListener(),e.createResizeListener()},createToggleListener:function(){var t,a=this;t=a.isMobile()?"touchstart":"click",e("body").delegate("."+s.toggleClass,t,function(){var o=e("."+s.cntClass);e(this).toggleClass("active"),o.hasClass("active")?(e(this).removeClass("active"),o.removeClass("active"),e("body").undelegate("*","mousewheel",a.scroll),e("body").undelegate("*","touchmove",a.scroll),e("body").undelegate("*","touchend",a.touchend),e("body").undelegate("*","touchstart",a.close),e("body").undelegate("*:not(."+s.toggleClass+" span)","click",a.close)):(e(this).addClass("active"),o.addClass("active"),e("body").delegate("*","mousewheel",a.scroll),e("body").delegate("*","touchmove",a.scroll),e("body").delegate("*","touchend",a.touchend),e("body").delegate("*","touchstart",{type:t},a.close),e("body").delegate("*:not(."+s.toggleClass+" span)","click",{type:t},a.close))})},createResizeListener:function(){var t=this;e(window).on("resize",function(){var a=e("."+s.cntClass);"none"==a.css("display")&&(a.removeClass("active"),e("."+s.toggleClass).removeClass("active"),e("body").undelegate("*","mousewheel",t.scroll),e("body").undelegate("*","touchmove",t.scroll),e("body").undelegate("*","touchend",t.touchend),e("body").undelegate("*","touchstart",t.close),e("body").undelegate("*:not(."+s.toggleClass+" span)","click",t.close))})},scroll:function(o){o.preventDefault();var l=e("."+s.menuClass),n=o.originalEvent.targetTouches?o.originalEvent.targetTouches[0].pageX:o.pageX,i=o.originalEvent.targetTouches?o.originalEvent.targetTouches[0].pageY:o.pageY;if(i>l.offset().top&&i<l.offset().top+l.outerHeight()&&n>l.offset().left&&n<l.offset().left+l.outerWidth()){var r=0;o.originalEvent.targetTouches?(t||(t=i),r=t-i,t=i,a=r>0):r=-50*(o.originalEvent.wheelDelta||-o.originalEvent.detail),l.stop().scrollTop(l.scrollTop()+r)}return!1},touchend:function(o){var l=e("."+s.menuClass);l.stop().animate({scrollTop:l.scrollTop()+(a?100:-100)},3e3,"easeOutQuint"),t=void 0},close:function(t){if(t.originalEvent){var a=e("."+s.menuClass),o=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,l=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY;l>a.offset().top&&l<a.offset().top+a.outerHeight()&&o>a.offset().left&&o<a.offset().left+a.outerWidth()||e("."+s.toggleClass).trigger(t.data.type)}},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},e.fn.rdparallax=function(e){var t=this;return t.length&&new o(t[0]).init(),t},window.RDMobilemenu_autoinit=function(t){var a=e(t);a.length&&new o(a[0]).init()}}(jQuery),$(document).ready(function(){RDMobilemenu_autoinit('[data-type="navbar"]')});