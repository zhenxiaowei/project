!function(){var e=$('<div id="galleryOverlay">'),t=$('<div id="gallerySlider">'),n=$('<a id="prevArrow"></a>'),a=$('<a id="nextArrow"></a>'),i=!1;$.fn.touchTouch=function(){function o(t){return i?!1:(e.show(),setTimeout(function(){e.addClass("visible")},100),l(t),void(i=!0))}function r(){return i?(e.hide().removeClass("visible"),i=!1,$(".placeholder").empty(),void(m=v)):!1}function l(e){t.css("left",100*-e+"%")}function c(e){setTimeout(function(){u(e)},1e3)}function u(e){if(0>e||e>=m.length)return!1;var t=m.eq(e).attr("href");t.match(/(\.jpg)|(\.png)|(\.gif)/i)?d(t,function(){h.eq(e).html(this)}):f(t,function(){h.eq(e).html(this)})}function d(e,t){var n=$("<img/>").on("load",function(){t.call(n)});n.attr("src",e)}function f(e,t){var n=$("<div/>",{"class":"iframe-wrap"}).append($("<div/>",{"class":"iframe"}).append($("<iframe/>",{src:e,allowfullscreen:"allowfullscreen"})));t.call(n)}function s(){p+1<m.length?(p++,l(p),c(p+1)):(t.addClass("rightSpring"),setTimeout(function(){t.removeClass("rightSpring")},500))}function g(){p>0?(p--,l(p),c(p-1)):(t.addClass("leftSpring"),setTimeout(function(){t.removeClass("leftSpring")},500))}var h=$([]),p=0,v=this,m=v;e.hide().appendTo("body"),t.appendTo(e),m.each(function(){h=h.add($('<div class="placeholder">'))}),t.append(h).on("click",function(e){$(e.target).is("img")&&$(e.target).hasClass("iframe")||r()}),$("body").on("touchstart","#gallerySlider img, #gallerySlider .iframe",function(e){var n=e.originalEvent,a=n.changedTouches[0].pageX;return $("body").on("touchmove",function(e){e.preventDefault(),n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n.pageX-a>10?(t.off("touchmove"),g()):n.pageX-a<-10&&(t.off("touchmove"),s())}),!1}).on("touchend",function(){$("body").off("touchmove")}),m.on("click",function(e){e.preventDefault();var t,n,a=$(this),i=a.parent().closest("[data-gallery]");a.attr("data-gallery")?(t=a.attr("data-gallery"),n="item"):i.length&&(t=i.attr("data-gallery"),n="ancestor"),t&&"item"==n?m=$("[data-gallery="+t+"]"):t&&"ancestor"==n&&(m=m.filter(function(){return $(this).parent().closest("[data-gallery]").length})),p=m.index(this),o(p),u(p),c(p+1),c(p-1)}),e.append(n).append(a),n.click(function(e){e.preventDefault(),g()}),a.click(function(e){e.preventDefault(),s()}),$(window).bind("keydown",function(e){37==e.keyCode?g():39==e.keyCode?s():27==e.keyCode&&r()})}}(jQuery);